@using Webapp.Models.Data;
@model IEnumerable<Webapp.Models.PatientListViewModel>;

@{
    ViewData["Title"] = "Patiëntenlijst";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Patiëntenlijst</h2>


<div id="patientContainer">
    <table class="table table-striped table-hover" id="patientTable" style="width:100%;">
        <thead>
            <tr>
                <th>Naam</th>
                <th>Geslacht</th>
                <th>Geboortedatum</th>
                <th>Acties</th>
                </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Name</td>
                    <td>@item.Genders[item.GenderId]</td>
                    <td>@item.Birth.ToShortDateString()</td>
                   @if (item.AccessToDoctor)
                    {
                    <td>
                       @if (Context.User.IsInRole("doctor"))
                        {
                            @Html.ActionLink("Details", "PatientDetails", "Profile", new { id = item.UserId })
                        }
                    </td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>
@section Scripts {
<script>
    $("document").ready(function () {
        initDataTable();
        $("#patientContainer").removeClass("hidden");
    });

    function initDataTable() {
        $("#patientTable").DataTable({
            "language": {
                "sProcessing": "Bezig...",
                "sLengthMenu": "_MENU_ resultaten weergeven",
                "sZeroRecords": "Geen resultaten gevonden",
                "sInfo": "_START_ tot _END_ van _TOTAL_ resultaten",
                "sInfoEmpty": "Geen resultaten om weer te geven",
                "sInfoFiltered": " (gefilterd uit _MAX_ resultaten)",
                "sInfoPostFix": "",
                "sSearch": "Zoeken:",
                "sEmptyTable": "Geen resultaten aanwezig in de tabel",
                "sInfoThousands": ".",
                "sLoadingRecords": "Een moment geduld aub - bezig met laden...",
                "oPaginate": {
                    "sFirst": "Eerste",
                    "sLast": "Laatste",
                    "sNext": "Volgende",
                    "sPrevious": "Vorige"
                },
                "oAria": {
                    "sSortAscending": ": activeer om kolom oplopend te sorteren",
                    "sSortDescending": ": activeer om kolom aflopend te sorteren"
                }
            }
        });
    }

</script>
}
